Rapport technique

Standardisation de lâ€™environnement Python et intÃ©gration avec Oracle APEX sous Windows


---

1. Introduction

Ce rapport a pour objectif de dÃ©finir un cadre technique clair et standardisÃ© pour le dÃ©veloppement et lâ€™exploitation de scripts Python dÃ©diÃ©s au traitement des donnÃ©es, au sein de lâ€™entreprise, sur systÃ¨me Windows.

La solution proposÃ©e vise Ã  :

Garantir lâ€™exÃ©cution des mÃªmes codes chez tous les collaborateurs

Ã‰viter les problÃ¨mes liÃ©s aux Ø§Ø®ØªÙ„Ø§ÙØ§Øª de versions Python et de bibliothÃ¨ques

Faciliter le partage, la maintenance et lâ€™industrialisation des scripts

Permettre lâ€™intÃ©gration contrÃ´lÃ©e avec Oracle APEX


âš ï¸ ConformÃ©ment Ã  la politique interne, lâ€™utilisation dâ€™Anaconda est interdite. Seul Python officiel est autorisÃ©.


---

2. PÃ©rimÃ¨tre dâ€™application

SystÃ¨me dâ€™exploitation : Windows 10 / Windows 11

Langage : Python

Cas dâ€™usage : traitement de donnÃ©es, automatisation, intÃ©gration applicative

Plateforme cible : Oracle APEX



---

3. Standardisation de la version Python

3.1 Version officielle

Une seule version de Python est autorisÃ©e pour lâ€™ensemble de lâ€™entreprise.

Version recommandÃ©e : Python 3.10.x


3.2 Installation

Depuis le site officiel : python.org

Ou depuis un dÃ©pÃ´t interne validÃ© par lâ€™IT


3.3 VÃ©rification

python --version

ğŸš« Toute autre version est interdite.


---

4. Environnement virtuel (Virtual Environment)

4.1 Principe

Chaque projet Python doit Ãªtre isolÃ© dans un environnement virtuel dÃ©diÃ© afin dâ€™Ã©viter les conflits de dÃ©pendances.

Installation globale de bibliothÃ¨ques interdite

Un environnement par projet


4.2 CrÃ©ation de lâ€™environnement

python -m venv .venv

4.3 Activation (Windows)

.venv\Scripts\activate

ğŸ“Œ Le nom .venv est obligatoire et standardisÃ©.


---

5. Gestion des bibliothÃ¨ques Python

5.1 Fichier de rÃ©fÃ©rence

Le fichier requirements.txt constitue lâ€™unique source de vÃ©ritÃ© pour les dÃ©pendances.

Exemple :

pandas==2.1.4
numpy==1.26.3
matplotlib==3.8.2
scikit-learn==1.4.0
pyyaml==6.0.1

5.2 Installation des dÃ©pendances

pip install -r requirements.txt

ğŸš« Toute installation hors de ce fichier est interdite.


---

6. Uniformisation de pip

Afin de garantir une rÃ©solution identique des dÃ©pendances :

python -m pip install --upgrade pip==23.3.1


---

7. Structure standard des projets

project-name/
â”‚â”€â”€ .venv/              (non versionnÃ©)
â”‚â”€â”€ src/
â”‚â”€â”€ tests/
â”‚â”€â”€ data/
â”‚â”€â”€ logs/
â”‚â”€â”€ requirements.txt
â”‚â”€â”€ README.md
â”‚â”€â”€ .gitignore

.gitignore

.venv/
__pycache__/
*.pyc


---

8. Gestion du code source (Git)

DÃ©pÃ´t Git unique et officiel

Travail via branches

Revue de code obligatoire avant fusion


ğŸ“Œ Tout code doit fonctionner aprÃ¨s :

pip install -r requirements.txt


---

9. Bonnes pratiques de dÃ©veloppement

Utilisation de pathlib pour les chemins

Interdiction des chemins codÃ©s en dur

Fonctions claires et documentÃ©es

Docstrings obligatoires


Exemple :

from pathlib import Path
BASE_DIR = Path(__file__).resolve().parent


---

10. Tests

Des tests simples sont obligatoires avant toute intÃ©gration.

pytest


---

11. Documentation

Chaque projet doit contenir un fichier README.md prÃ©cisant :

Les Ã©tapes dâ€™installation

La procÃ©dure dâ€™exÃ©cution

Des exemples dâ€™utilisation



---

12. IntÃ©gration avec Oracle APEX

12.1 Principe gÃ©nÃ©ral

Oracle APEX ne lance pas directement Python. Lâ€™exÃ©cution se fait via :

Oracle APEX â†’ DBMS_SCHEDULER â†’ Fichier BAT â†’ Environnement .venv â†’ Script Python


---

13. Organisation des scripts pour APEX

C:\python_jobs\
â”‚â”€â”€ project-data\
â”‚   â”‚â”€â”€ .venv\
â”‚   â”‚â”€â”€ src\
â”‚   â”‚   â””â”€â”€ main.py
â”‚   â”‚â”€â”€ logs\
â”‚   â”‚â”€â”€ requirements.txt
â”‚   â”‚â”€â”€ run_job.bat


---

14. Fichier BAT de lancement

Exemple : run_job.bat

@echo off

call C:\python_jobs\project-data\.venv\Scripts\activate.bat
cd /d C:\python_jobs\project-data
python src\main.py >> logs\job.log 2>&1
deactivate

Ce fichier assure :

Lâ€™activation de la bonne Ø§Ù„Ø¨ÙŠØ¦Ø© Python

La journalisation des rÃ©sultats

Lâ€™exÃ©cution contrÃ´lÃ©e du script



---

15. Exemple de script Python

from datetime import datetime

def main():
    print(f"Job started at {datetime.now()}")
    print("Processing completed successfully")

if __name__ == "__main__":
    main()


---

16. Lancement depuis Oracle (DBMS_SCHEDULER)

BEGIN
  DBMS_SCHEDULER.create_job (
    job_name   => 'RUN_PYTHON_JOB',
    job_type   => 'EXECUTABLE',
    job_action => 'C:\\python_jobs\\project-data\\run_job.bat',
    enabled    => TRUE
  );
END;
/


---

17. Passage de paramÃ¨tres depuis APEX

BAT

python src\main.py %1 %2

Python

import sys
param1 = sys.argv[1]
param2 = sys.argv[2]


---

18. SÃ©curitÃ© et contrÃ´le

Scripts stockÃ©s dans un rÃ©pertoire protÃ©gÃ©

Droits dâ€™exÃ©cution limitÃ©s

APEX nâ€™accÃ¨de jamais directement Ã  Python

Logs centralisÃ©s



---

19. Supervision et logs

Logs applicatifs dans logs/job.log

Suivi Oracle via :


SELECT * FROM USER_SCHEDULER_JOB_RUN_DETAILS;


---

20. RÃ¨gles obligatoires

âœ” Python officiel uniquement âœ” Environnement virtuel obligatoire âœ” requirements.txt verrouillÃ© âœ” ExÃ©cution via BAT uniquement âœ” Git obligatoire âœ” Pas dâ€™installations globales


---

21. Conclusion

La mise en place de cette architecture garantit :

Une standardisation complÃ¨te de lâ€™environnement Python

Une intÃ©gration sÃ©curisÃ©e avec Oracle APEX

Une meilleure qualitÃ© de code

Une maintenance simplifiÃ©e

Une conformitÃ© totale avec la politique IT de lâ€™entreprise


Ce cadre constitue une base solide et Ã©volutive pour lâ€™industrialisation des traitements Python au sein de lâ€™organisation.

ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ ØªÙ‚Ø±ÙŠØ± ØªÙ‚Ù†ÙŠ ÙƒØ§Ù…Ù„ Ø¨Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ© ÙŠØ¬Ù…Ø¹ ÙƒÙ„ Ù…Ø§ ØªÙ… Ø°ÙƒØ±Ù‡ Ø­ÙˆÙ„:

ØªÙˆØ­ÙŠØ¯ Ø¨ÙŠØ¦Ø© Python Ø¨Ø¯ÙˆÙ† Anaconda

Ø§Ù„Ø¹Ù…Ù„ Ø¹Ù„Ù‰ Windows

Ø§Ø³ØªØ¹Ù…Ø§Ù„ venv Ùˆ requirements.txt

ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù…Ø´Ø§Ø±ÙŠØ¹ ÙˆGit

Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª

Ø§Ù„Ø¯Ù…Ø¬ Ù…Ø¹ Oracle APEX Ø¹Ø¨Ø± Ù…Ù„ÙØ§Øª BAT Ùˆ DBMS_SCHEDULER

Ø§Ù„Ø£Ù…Ø§Ù†ØŒ Ø§Ù„ØªØªØ¨Ø¹ØŒ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ


ğŸ“„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¬Ø§Ù‡Ø² ÙƒÙˆØ«ÙŠÙ‚Ø© Ø¯Ø§Ø®Ù„ÙŠØ© Ø±Ø³Ù…ÙŠØ© ÙˆÙŠÙ…ÙƒÙ†:

Ø§Ø¹ØªÙ…Ø§Ø¯Ù‡ ÙƒÙ€ Policy IT

Ø§Ø³ØªØ¹Ù…Ø§Ù„Ù‡ ÙƒØ¯Ù„ÙŠÙ„ Onboarding

ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ PDF Ø£Ùˆ Word

ØªØ®ØµÙŠØµÙ‡ Ø¨Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© ÙˆØ´Ø¹Ø§Ø±Ù‡Ø§


Ø¥Ø°Ø§ Ø±ØºØ¨ØªØŒ Ø£Ø³ØªØ·ÙŠØ¹ ÙÙŠ Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©:

ØªØ­ÙˆÙŠÙ„Ù‡ Ø¥Ù„Ù‰ PDF Ø§Ø­ØªØ±Ø§ÙÙŠ

ØªØ¨Ø³ÙŠØ·Ù‡ Ù„Ù†Ø³Ø®Ø© Executive Summary

Ø¥Ø¶Ø§ÙØ© Workflow CI/CD

ØªØ®ØµÙŠØµÙ‡ Ø­Ø³Ø¨ Oracle Version / APEX Version


Ù‚Ù„ Ù„ÙŠ Ù…Ø§ ØªØ±ÙŠØ¯ Ø¨Ø§Ù„Ø¶Ø¨Ø· ğŸ‘